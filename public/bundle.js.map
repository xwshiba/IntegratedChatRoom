{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://simple-chat-room/./src/constants.js","webpack://simple-chat-room/./src/listeners.js","webpack://simple-chat-room/./src/render.js","webpack://simple-chat-room/./src/services.js","webpack://simple-chat-room/./src/state.js","webpack://simple-chat-room/webpack/bootstrap","webpack://simple-chat-room/webpack/runtime/define property getters","webpack://simple-chat-room/webpack/runtime/hasOwnProperty shorthand","webpack://simple-chat-room/webpack/runtime/make namespace object","webpack://simple-chat-room/./src/chat-app.js"],"sourcesContent":["export const SERVER = {\n    AUTH_MISSING: 'auth-missing',\n    AUTH_INSUFFICIENT: 'auth-insufficient',\n    REQUIRED_USERNAME: 'required-username',\n    REQUIRED_MESSAGE: 'required-message',\n    INVALID_MESSAGE: 'invalid-message',\n};\n\nexport const CLIENT = {\n    NETWORK_ERROR: 'network-error',\n    NO_SESSION: 'no-session',\n};\n\nexport const MESSAGES = {\n    // The [] below uses the variable value as the key\n    [CLIENT.NETWORK_ERROR]: 'Trouble connecting to the network.  Please try again',\n    // Here we use 'dog' to simulate a bad password\n    [SERVER.AUTH_MISSING]: `You may have logged out or your session has expired. Please try login again`,\n    [SERVER.AUTH_INSUFFICIENT]: 'Your username/password combination does not match any records, please try again.',\n    [SERVER.REQUIRED_USERNAME]: 'Please enter a valid (1 to 20 letters and/or numbers) username',\n    [SERVER.REQUIRED_MESSAGE]: `Message can't be empty. Please enter your message.`,\n    [SERVER.INVALID_MESSAGE]: `Your message is invalid. We only support English sentences at the current moment. Sorry for the inconvenience.`,\n    default: 'Something went wrong.  Please try again',\n};\n","import { SERVER, CLIENT } from './constants';\nimport {\n    fetchChatData,\n    fetchLogin,\n    fetchLogout,\n    fetchSendMessage,\n} from './services';\nimport {\n    setError,\n    login,\n    logout,\n    addMessage,\n    setChatApp,\n    waitOnMessages,\n    waitOnLogin,\n} from './state';\nimport {\n    renderFeed,\n    renderControl,\n} from './render';\n\nlet timeoutId = '';\n\nexport function addAbilityToLogin({ state, appEl, feedEl, controlEl }) {\n    // Using 'submit' so we can get both submit via button-click and by \"enter\"\n    appEl.addEventListener('submit', (e) => {\n        e.preventDefault();\n        if (!e.target.classList.contains('forms__login')) {\n            return;\n        };\n\n        const username = appEl.querySelector('.login__username').value;\n\n        waitOnLogin();\n        renderFeed({ state, feedEl }); // show loading state\n\n        fetchLogin(username)\n            .then(chatData => {\n                login(username);\n                setChatApp(chatData);\n                renderFeed({ state, feedEl });\n                renderControl({ state, controlEl });\n                setTimeout(pollRefreshedData, 5000, { state, feedEl, controlEl });\n            })\n            .catch(err => {\n                setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n                renderFeed({ state, feedEl });\n                renderControl({ state, controlEl });\n            });\n    });\n};\n\nexport function addAbilityToLogout({ state, appEl, feedEl, controlEl}) {\n    appEl.addEventListener('click', (e) => {\n        if (!e.target.classList.contains('controls__logout')) {\n            return;\n        };\n\n        logout();\n        renderFeed({ state, feedEl });\n        renderControl({ state, controlEl });\n        clearTimeout(timeoutId);\n\n        fetchLogout() // We don't really care about results\n            .catch(err => {\n                setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n                renderFeed({ state, feedEl });\n                renderControl({ state, controlEl });\n            });\n    });\n};\n\nexport function addAbilityToSendMessage({ state, appEl, feedEl, controlEl }) {\n    appEl.addEventListener('submit', (e) => {\n        if (!e.target.classList.contains('outgoing__forms')) {\n            return;\n        };\n\n        const message = appEl.querySelector('.outgoing__message').value;\n\n        waitOnMessages(); // Show loading state\n        renderFeed({ state, feedEl });   \n\n        fetchSendMessage(message)\n            .then(messageObj => {\n                addMessage(messageObj);\n                renderFeed({ state, feedEl });\n                renderControl({ state, controlEl });\n            })\n            .catch(err => {\n                setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n                renderFeed({ state, feedEl });\n                renderControl({ state, controlEl });\n            });\n    });\n};\n\nfunction refresh({ state, feedEl, controlEl }) {\n    fetchChatData()\n        .then(chatData => {\n            setChatApp(chatData);\n            renderFeed({ state, feedEl });\n        })\n        .catch(err => {\n            clearTimeout(timeoutId);\n\n            if (err?.error == CLIENT.NO_SESSION) { // expected \"error\"\n                logout(); // No longer waiting, set to logged out case\n                renderFeed({ state, feedEl });\n                renderControl({ state, controlEl });\n                return;\n            };\n\n            setError(err?.error || 'ERROR');\n            renderFeed({ state, feedEl });\n            renderControl({ state, controlEl });\n        });\n};\n\nexport function pollRefreshedData({ state, feedEl, controlEl }) {\n    refresh({ state, feedEl, controlEl });\n    timeoutId = setTimeout( pollRefreshedData, 5000, { state, feedEl, controlEl } );\n};\n","export function renderFeed({ state, feedEl }) {\n  const feedHtml = `\n        <p class=\"instruction\">Welcome ${state.username}! This is Your Instant Chat App :)</p>\n        ${generateStatusHtml(state)}\n        ${generateLoginHtml(state)}\n        ${generateContentHtml(state)}\n    `;\n  feedEl.innerHTML = feedHtml;\n};\n\nexport function renderControl({ state, controlEl }) {\n  let controlHtml = ``;\n\n  if (!state.isLoggedIn) {\n    controlHtml = ``;\n  } else {\n    controlHtml = `${generateAddMessageHtml(state)}`;\n  };\n  controlEl.innerHTML = controlHtml;\n};\n\nfunction generateStatusHtml(state) {\n  return `\n      <div class=\"status\">${state.error}</div>\n  `;\n};\n\nfunction generateLoginHtml(state) {\n  if (state.isLoginPending) {\n    return `\n      <div class=\"login__waiting\">Loading Your Chat App...</div>\n    `\n  };\n\n  if (state.isLoggedIn) {\n    return ``;\n  };\n\n  return `\n      <div class=\"login\">\n        <form class=\"forms forms__login\" action=\"#/login\">\n          <label class=\"forms__label\">\n            <span class=\"forms__tag\">Username:</span>\n            <input \n                class=\"forms__input login__username\" \n                type=\"text\"\n                name=\"username\"\n                value=\"\" />\n          </label>\n          <button class=\"forms__btn btn\" type=\"submit\">Login</button>\n        </form>\n      </div>\n  `;\n};\n\nfunction generateContentHtml(state) {\n  if (!state.isLoggedIn) {\n    return ``;\n  };\n\n  if (state.isMessagesPending) {\n    return `\n            <div class=\"content\">\n                ${generateControlsHtml()}\n                <div class=\"chat-app__waiting\">Loading Your Chat App...</div>\n            </div>`;\n  };\n\n  return `\n      <div class=\"content\">\n        ${generateControlsHtml()}\n        <div class=\"content__chat\">\n            <ul class=\"users\">\n                <span class=\"user__info\">\n                    All Users\n                </span>\n                ${generateUsersHtml(state)}\n            </ul>\n            <ol class=\"messages\">\n                <span class=\"messages__info\">\n                    Received Messages\n                </span>\n                ${generateMessagesHtml(state)}\n            </ol>\n        </div>\n      </div>\n  `;\n};\n\nfunction generateControlsHtml() {\n  return `\n        <div class=\"controls\">\n          <button class=\"controls__logout btn\">Logout</button>\n        </div>`;\n};\n\nfunction generateUsersHtml(state) {\n  const loggedInUsersHtml = Object.values(state.loggedInUsers).map(user => { // this is an array\n    return `\n      <li class=\"user\">\n        <span\n          class=\"user__username--logged-in\">\n            ${user}\n        </span> \n      </li>\n    `;\n  }).join('') || `<p>No Online Friends yet, add one!</p>`;\n\n  const offlineUsersHtml = Object.values(state.offlineUsers).map(user => {\n    return `\n        <li class=\"user\">\n          <span\n            class=\"user__username--logged-out\">\n              ${user}\n          </span> \n        </li>\n    `;\n  }).join('') || ``;\n\n  const usersHtml = `\n    ${loggedInUsersHtml}\n    ${offlineUsersHtml}\n  `\n  return usersHtml;\n};\n\nfunction generateMessagesHtml(state) {\n  Object.entries(state.messages).sort()\n  const messagesHtml = Object.entries(state.messages).sort((a, b) => b[1].date - a[1].date).map((userMessage) => {\n    // every object entry array item has two keys - 0 as key, 1 as value, value is the real message\n    const { id, message, sender, date } = userMessage[1];\n    const formattedDate = new Date(date);\n\n    return `\n          <li class=\"message ${sender === state.username ? `message-self` : ``}\" data-id=${id}>\n            <div class=\"message__sender\">\n                <img class=\"avatar\" alt=\"default avatar of ${sender}\" src=\"images/avatar-default.jpg\"/>\n                <span class=\"username\">${sender}</span>\n            </div>\n            <div class=\"message__content ${sender === state.username ? `message__self` : ``}\">\n                <span class=\"message__text\">${message}</span>\n                <span class=\"message__time\">${formattedDate}</span>\n            </div>\n          </li>\n        `;\n  }).join('') || `<p>No Messages yet, start chat!</p>`;\n  \n  return messagesHtml;\n};\n\nfunction generateAddMessageHtml(state) {\n  return `\n      <div class=\"outgoing\">\n        <form class=\"forms outgoing__forms\" action=\"#/chats\" method=\"POST\">\n          <input name=\"text\" class=\"forms__input outgoing__message\" value=\"\" placeholder=\"Enter message to send\" required />\n          <button type=\"submit\" class=\"forms__btn btn outgoing__btn\">Send</button>\n        </form>\n      </div>`\n};\n","export function fetchSession() {\n    return fetch('/api/v1/session', {\n        method: 'GET',\n        headers: {\n            'content-type': 'application/json'\n        },\n        credentials: 'include',\n    })\n        .catch(() => Promise.reject({ error: 'network-error' }))\n        .then(response => {\n            if (response.ok) {\n                return response.json();\n            };\n            return response.json()\n                .catch(error => Promise.reject({ error }))\n                .then(err => Promise.reject(err));\n        });\n};\n\nexport function fetchLogin(username) {\n    return fetch('/api/v1/session', {\n        method: 'POST',\n        headers: {\n            'content-type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify({ username }),\n    })\n        .catch(() => Promise.reject({ error: 'network-error' }))\n        .then(response => {\n            if (response.ok) {\n                return response.json();\n            };\n            return response.json()\n                .catch(error => Promise.reject({ error }))\n                .then(err => Promise.reject(err));\n        });\n};\n\nexport function fetchLogout() {\n    return fetch('/api/v1/session', {\n        method: 'DELETE',\n    })\n        .catch(() => Promise.reject({ error: 'network-error' }))\n        .then(response => {\n            if (response.ok) {\n                return response.json();\n            };\n            return response.json()\n                .catch(error => Promise.reject({ error }))\n                .then(err => Promise.reject(err));\n        });\n};\n\nexport function fetchChatData() {\n    return fetch('/api/v1/chats')\n        .catch(() => Promise.reject({ error: 'network-error' }))\n        .then(response => {\n            if (response.ok) {\n                return response.json();\n            };\n            return response.json()\n                .catch(error => Promise.reject({ error }))\n                .then(err => Promise.reject(err));\n        });\n};\n\nexport function fetchSendMessage(message) {\n    return fetch('/api/v1/chats', {\n        method: 'POST',\n        headers: {\n            'content-type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({ message }),\n    })\n        .catch(() => Promise.reject({ error: 'networkError' }))\n        .then(response => {\n            if (response.ok) {\n                return response.json();\n            };\n            return response.json()\n                .catch(error => Promise.reject({ error }))\n                .then(err => Promise.reject(err));\n        });\n};\n","import { MESSAGES } from './constants';\n\nconst state = {\n    // We store these as an object because we will access by id\n    loggedInUsers: [],\n    offlineUsers: [],\n    messages: {},\n    isLoggedIn: false,\n    isLoginPending: true, // We start with our login status unknown\n    isMessagesPending: false,\n    username: '',\n    error: '',\n};\n\nexport function waitOnLogin() {\n    state.isLoggedIn = false;\n    state.isLoginPending = true;\n    state.username = '';\n    state.loggedInUsers = [],\n    state.offlineUsers = [],\n    state.messages = {};\n    state.error = '';\n};\n\nexport function waitOnMessages() {    \n    state.isMessagesPending = true;\n    state.error = '';\n};\n\nexport function setChatApp(chatData) {\n    state.loggedInUsers = chatData.loggedInUsers;\n    state.offlineUsers = chatData.offlineUsers;\n    state.messages = chatData.messages;\n    state.isMessagesPending = false;\n    state.error = '';\n};\n\nexport function addMessage(message) {\n    const { id } = message;\n    state.messages[id] = message;\n    state.error = '';\n    state.isMessagesPending = false;\n};\n\nexport function login(username) {\n    state.isLoggedIn = true;\n    state.isLoginPending = false;\n    state.username = username;\n    state.error = '';\n};\n\nexport function logout() {\n    state.isLoggedIn = false;\n    state.isLoginPending = false;\n    state.username = '';\n    state.loggedInUsers = [];\n    state.offlineUsers = [];\n    state.messages = {},\n    state.error = '';\n};\n\nexport function setError(error) {\n    state.isLoggedIn = false;\n    state.isLoginPending = false;\n    if (!error) {\n        state.error = '';\n        return;\n    };\n    state.error = MESSAGES[error] || MESSAGES.default;\n};\n\nexport default state;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { SERVER, CLIENT } from './constants';\nimport state, {\n    login,\n    logout,\n    setError,\n    setChatApp,\n} from './state';\nimport { \n    fetchSession, \n    fetchChatData, \n} from './services';\nimport {\n    renderFeed,\n    renderControl,\n} from './render';\nimport {\n    addAbilityToLogin,\n    addAbilityToLogout,\n    addAbilityToSendMessage,\n    pollRefreshedData,\n} from './listeners';\n\nconst appEl = document.querySelector('#app');\nconst feedEl = document.querySelector('.main__feed');\nconst controlEl = document.querySelector('.main__control');\nrenderFeed({ state, appEl, feedEl });\naddAbilityToLogin({ state, appEl, feedEl, controlEl });\naddAbilityToLogout({ state, appEl, feedEl, controlEl });\naddAbilityToSendMessage({ state, appEl, feedEl, controlEl });\ncheckForSession();\n\n//////////\n\nfunction checkForSession() {\n    fetchSession()\n        .then(session => { // The returned object from the service call\n            login(session.username); // We do not have messages yet\n            renderFeed({ state, feedEl }); // Show we are logged in but don't have any messages\n            renderControl({ state, controlEl });\n            return fetchChatData(); // By returning this promise we can chain the original promise\n        })\n        .catch(err => {\n            if (err?.error === SERVER.AUTH_MISSING) {\n                return Promise.reject({ error: CLIENT.NO_SESSION }) // Expected, not a problem\n            };\n            return Promise.reject(err); // Pass any other error unchanged\n        })\n        .then(chatData => {\n            setChatApp(chatData);\n            renderFeed({ state, feedEl });\n            renderControl({ state, controlEl });\n            setTimeout(pollRefreshedData, 5000, { state, feedEl, controlEl });\n        })\n        .catch(err => {\n            if (err?.error == CLIENT.NO_SESSION) { // expected \"error\"\n                logout(); // No longer waiting, set to logged out case\n                renderFeed({ state, feedEl });\n                renderControl({ state, controlEl });\n                return;\n            };\n            // For unexpected errors, report them\n            setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n            renderFeed({ state, feedEl });\n            renderControl({ state, controlEl });\n        });\n};\n"],"names":["SERVER","AUTH_MISSING","AUTH_INSUFFICIENT","REQUIRED_USERNAME","REQUIRED_MESSAGE","INVALID_MESSAGE","CLIENT","NETWORK_ERROR","NO_SESSION","MESSAGES","_MESSAGES","_defineProperty","fetchChatData","fetchLogin","fetchLogout","fetchSendMessage","setError","login","logout","addMessage","setChatApp","waitOnMessages","waitOnLogin","renderFeed","renderControl","timeoutId","addAbilityToLogin","_ref","state","appEl","feedEl","controlEl","addEventListener","e","preventDefault","target","classList","contains","username","querySelector","value","then","chatData","setTimeout","pollRefreshedData","err","error","addAbilityToLogout","_ref2","clearTimeout","addAbilityToSendMessage","_ref3","message","messageObj","refresh","_ref4","_ref5","feedHtml","concat","generateStatusHtml","generateLoginHtml","generateContentHtml","innerHTML","controlHtml","isLoggedIn","generateAddMessageHtml","isLoginPending","isMessagesPending","generateControlsHtml","generateUsersHtml","generateMessagesHtml","loggedInUsersHtml","Object","values","loggedInUsers","map","user","join","offlineUsersHtml","offlineUsers","usersHtml","entries","messages","sort","messagesHtml","a","b","date","userMessage","_userMessage$","id","sender","formattedDate","Date","fetchSession","fetch","method","headers","credentials","Promise","reject","response","ok","json","body","JSON","stringify","document","checkForSession","session"],"sourceRoot":""}